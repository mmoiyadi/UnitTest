function setTaskStatusToNS(a,c){if(!c){if(a.data){a.set("status","NS")}else{a.status="NS"}}if(c){for(var b=0;b<c.length;b++){this.setSubtasksStatusToNS(c)}}return{isSubtaskDisabled:false}}function setTaskStatusToIP(a,b){if(a.data){a.set("status","IP")}else{a.status="IP"}}function setTaskStatusToCO(a,c){if(!c){if(a.data){a.set("status","CO")}else{a.status="CO"}}if(c){for(var b=0;b<c.length;b++){this.setSubtasksStatusToCO(c)}}return{isSubtaskDisabled:true}}function setSubtasksStatusToNS(b,c){for(var a=0;a<b.length;a++){if(b[a].data){if(b[a].get("status")!="NS"){b[a].set("status","NS")}}else{if(b[a].status!="NS"||b[a].status!="0"){b[a].status="NS"}b[a].complete=false}}}function setSubtasksStatusToIP(b){for(var a=0;a<b.length;a++){if(b[a].data){if(b[a].get("status")!="IP"){b[a].set("status","IP")}}else{if(b[a].status!="IP"||b[a].status!="1"){b[a].status="IP"}b[a].complete=false}}}function setSubtasksStatusToCO(b,c){for(var a=0;a<b.length;a++){if(b[a].data){if(b[a].get("status")!="CO"){b[a].set("status","CO")}}else{if(b[a].status!="CO"||b[a].status!="2"){b[a].status="CO"}b[a].complete=true}}}function enableStatusForCOSubtasks(b,c){for(var a=0;a<b.length;a++){if(b[a].data){if(b[a].get("status")=="CO"){b[a].set("status","CO")}}else{if(b[a].status=="CO"||b[a].status=="2"){b[a].status="CO"}b[a].complete=true}}}function ChangeTaskStatusFromNSToIP(){}function ChangeTaskStatusFromNSToCO(a,c,e,b,d){if(c.get){c=c.get("model")}if(c.taskType=="fullkit"){if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"&&c.checklistItems.length===0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_NS_TO_CO_EMPTY_CHECKLIST,"Task "+c.name+TASK_STATUS_CHANGE_FROM_NS_TO_CO);d("no");return}if(c.percentComplete!=100){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_NS_TO_CO,TASK_ALERT_MSG_FOR_NS_TO_CO_CHECKLIST,function(){this.markChecklistItemsCO(c);c.percentComplete=100;if(d){d("yes")}},function(){if(d){d("no")}});return}d("yes");return}else{if(!this.checkIfAllSubtasksAreCO(e)){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_NS_TO_CO,TASK_ALERT_MSG_FOR_NS_TO_CO,function(){this.setSubtasksStatusToCO(e,true);b=false;if(d){d("yes")}},function(){b=true;if(d){d("no")}})}else{if(d){d("yes")}}}}function ChangeTaskStatusFromIPToCO(a,c,e,b,d){if(c.get){c=c.get("model")}if(c.taskType==="fullkit"){if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"&&c.checklistItems.length===0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_IP_TO_CO_EMPTY_CHECKLIST,"Task "+c.name+TASK_STATUS_CHANGE_FROM_IP_TO_CO);d("no");return}if(c.percentComplete!=100){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_IP_TO_CO,TASK_ALERT_MSG_FOR_IP_TO_CO_CHECKLIST,function(){this.markChecklistItemsCO(c);c.percentComplete=100;if(d){d("yes")}},function(){if(d){d("no")}});return}d("yes");return}else{if(!this.checkIfAllSubtasksAreCO(e)){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_IP_TO_CO,TASK_ALERT_MSG_FOR_IP_TO_CO,function(){this.setSubtasksStatusToCO(e,true);b=false;if(d){d("yes")}},function(){b=true;if(d){d("no")}})}else{if(d){d("yes")}}}}function ChangeTaskStatusFromIPToNS(a,b,d,c){if(b.get){b=b.get("model")}if(b.taskType==="fullkit"){if(b.checklistItems.length>0&&b.percentComplete!=0){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_IP_TO_NS,TASK_ALERT_MSG_FOR_IP_TO_NS_CHECKLIST,function(){this.markChecklistItemsNS(b);b.percentComplete=0;if(c){c("yes")}},function(){if(c){c("no")}});return}c("yes");return}else{if(!this.checkIfAllSubtasksAreNS(d)){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_IP_TO_NS,TASK_ALERT_MSG_FOR_IP_TO_NS,function(){this.setSubtasksStatusToNS(d);if(c){c("yes")}},function(){if(c){c("no")}})}else{if(c){c("yes")}}}}function ChangeTaskStatusFromCOToNS(a,b,d,e,c){if(b.get){b=b.get("model")}if(b.taskType==="fullkit"){if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"&&b.checklistItems.length===0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_CO_TO_NS_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_CO_TO_NS);c("no");return}if(b.percentComplete!=0){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_CO_TO_NS,TASK_ALERT_MSG_FOR_CO_TO_NS_CHECKLIST,function(){this.markChecklistItemsNS(b);b.percentComplete=0;if(c){c("yes")}},function(){if(c){c("no")}});return}}else{if(!this.checkIfAllSubtasksAreNS(d)){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_CO_TO_NS,TASK_ALERT_MSG_FOR_CO_TO_NS,function(){this.setSubtasksStatusToNS(d,true);if(c){c("yes")}},function(){if(c){c("no")}})}else{if(c){c("yes")}}}}function ChangeTaskStatusFromCOToIP(a,b,d,e,c){if(b.get){b=b.get("model")}if(b.taskType=="fullkit"){if(b.percentComplete==100){if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_CO_TO_IP_NON_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_CO_TO_IP);c("no");return}else{b.percentComplete=FALLBACK_TASKCOMPLETION_FROM_CO_TO_IP_RL}}c("yes");return}else{if(!this.checkIfAllSubtasksAreIP(d)){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_CO_TO_IP,TASK_ALERT_MSG_FOR_CO_TO_IP,function(){this.setSubtasksStatusToIP(d);if(c){c("yes")}},function(){this.enableStatusForCOSubtasks(d,true);if(c){c("yes",true)}})}else{if(c){c("yes")}}e=false}}function ChangeTaskStatusFromNSToRL(a,b,c){if(b.get){b=b.get("model")}if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"&&b.checklistItems.length==0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_NS_TO_RL_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_NS_TO_RL);c("no");return}if(b.percentComplete==0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_NS_TO_RL_NON_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_NS_TO_RL);c("no");return}c("yes");return}function ChangeTaskStatusFromIPToRL(a,b,c){if(b.get){b=b.get("model")}if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"&&b.checklistItems.length==0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_IP_TO_RL_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_IP_TO_RL);c("no");return}if(b.percentComplete==0){if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_IP_TO_RL_NON_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_IP_TO_RL);c("no");return}else{PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_IP_TO_RL_NON_EMPTY_CHECKLIST_CONFIG_OFF,"Task "+a+TASK_STATUS_CHANGE_FROM_IP_TO_RL);c("no");return}}c("yes");return}function ChangeTaskStatusFromCOToRL(a,b,c){if(b.get){b=b.get("model")}if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"&&b.checklistItems.length==0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_CO_TO_RL_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_CO_TO_RL);c("no");return}if(b.percentComplete==100){if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_CO_TO_RL_NON_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_CO_TO_RL);c("no");return}else{b.percentComplete=FALLBACK_TASKCOMPLETION_FROM_CO_TO_IP_RL}}c("yes");return}function ChangeTaskStatusFromRLToNS(a,b,c){if(b.get){b=b.get("model")}if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"&&b.checklistItems.length==0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_RL_TO_NS_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_RL_TO_NS);c("no");return}if(b.percentComplete!=0){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_RL_TO_NS,TASK_ALERT_MSG_FOR_RL_TO_NS_CHECKLIST,function(){this.markChecklistItemsNS(b);b.percentComplete=0;if(c){c("yes")}},function(){if(c){c("no")}});return}c("yes");return}function ChangeTaskStatusFromRLToCO(a,b,c){if(b.get){b=b.get("model")}if(stl.app.updatePercentCompleteFKBasedOnChecklistItems==="1"&&b.checklistItems.length==0){PPI_Notifier.alert(FULLKIT_TASK_ERROR_MSG_FOR_RL_TO_CO_EMPTY_CHECKLIST,"Task "+a+TASK_STATUS_CHANGE_FROM_RL_TO_CO);c("no");return}if(b.percentComplete!=100){this.showAlertsForStatusChange("Task "+a+TASK_STATUS_CHANGE_FROM_RL_TO_CO,TASK_ALERT_MSG_FOR_RL_TO_CO_CHECKLIST,function(){this.markChecklistItemsCO(b);b.percentComplete=100;if(c){c("yes")}},function(){if(c){c("no")}});return}c("yes");return}function ChangeSubtaskStatusFromNSToIP(d,b,c){var a=b.status;if(b.data){a=b.get("status")}if(a!="IP"){if(b.data){b.set("status","IP")}else{b.status="IP"}}c("yes")}function ChangeSubtaskStatusFromNSToCO(g,c,h,e){var d=c.subtasks;var b=c.status;var a=c.name;if(c.data){d=c.childNodes;b=c.get("status");a=c.get("name")}d=d.slice(0);d.splice(d.indexOf(g),1);var f=checkIfAllSubtasksAreCO(d);if(f){this.showAlertsForStatusChange("Task "+a+" Status Change: "+b+" to Complete(CO)",SUBTASK_ALERT_MSG_FOR_STATUS_CHANGE_TO_CO,function(){this.setTaskStatusToCO(c);h=true;e("yes")},function(){this.setTaskStatusToIP(c);h=false;e("yes","no")})}else{this.setTaskStatusToIP(c);h=false;e("yes","no")}}function ChangeSubtaskStatusFromIPToCO(g,c,h,e){var d=c.subtasks;var b=c.status;var a=c.name;if(c.data){d=c.childNodes;b=c.get("status");a=c.get("name")}d=d.slice(0);d.splice(d.indexOf(g),1);var f=checkIfAllSubtasksAreCO(d);if(f){this.showAlertsForStatusChange("Task "+a+" Status Change: "+b+" to Complete(CO)",SUBTASK_ALERT_MSG_FOR_STATUS_CHANGE_TO_CO,function(){this.setTaskStatusToCO(c);h=true;e("yes","yes")},function(){this.setTaskStatusToIP(c);h=false;e("yes","no")})}else{this.setTaskStatusToIP(c);h=false;e("yes","no")}}function ChangeSubtaskStatusFromIPToNS(g,c,h,f){var e=c.subtasks;var b=c.status;var a=c.name;if(c.data){e=c.childNodes;b=c.get("status");a=c.get("name")}e=e.slice(0);e.splice(e.indexOf(g),1);var d=checkIfAllSubtasksAreNS(e);if(d){this.showAlertsForStatusChange("Task "+a+" Status Change: "+b+" to Not Started(NS)",SUBTASK_ALERT_MSG_FOR_STATUS_CHANGE_TO_NS,function(){this.setTaskStatusToNS(c);h=false;f("yes","yes")},function(){this.setTaskStatusToIP(c);h=false;f("yes","no")})}else{this.setTaskStatusToIP(c);h=false;f("yes","no")}}function ChangeSubtaskStatusFromCOToNS(g,c,h,f){var e=c.subtasks;var b=c.status;var a=c.name;if(c.data){e=c.childNodes;b=c.get("status");a=c.get("name")}e=e.slice(0);e.splice(e.indexOf(g),1);var d=checkIfAllSubtasksAreNS(e);if(d){this.showAlertsForStatusChange("Task "+a+" Status Change: "+b+" to Not Started(NS)",SUBTASK_ALERT_MSG_FOR_STATUS_CHANGE_TO_NS,function(){this.setTaskStatusToNS(c);h=false;f("yes","yes")},function(){this.setTaskStatusToIP(c);h=false;f("yes","no")})}else{this.setTaskStatusToIP(c);h=false;f("yes","no")}}function ChangeSubtaskStatusFromCOToIP(d,b,c){var a=b.status;if(b.data){a=b.get("status")}if(a=="1"){a=STATUS_IP}if(a!=STATUS_IP){this.setTaskStatusToIP(b)}c("yes")}function checkIfAllSubtasksAreCO(c){for(var b=0;b<c.length;b++){var a=c[b].status;if(c[b].data){a=c[b].get("status")}if(a=="2"){a=STATUS_CO}if(a!=STATUS_CO){return false}}return true}function checkIfAllSubtasksAreNS(c){for(var b=0;b<c.length;b++){var a=c[b].status;if(c[b].data){a=c[b].get("status")}if(a=="0"){a=STATUS_NS}if(a!=STATUS_NS){return false}}return true}function checkIfAllSubtasksAreIP(c){for(var b=0;b<c.length;b++){var a=c[b].status;if(c[b].data){a=c[b].get("status")}if(a=="1"){a=STATUS_IP}if(a!=STATUS_IP){return false}}return true}function showAlertsForStatusChange(c,b,a,d){PPI_Notifier.confirm(b,c,a,d)}function markChecklistItemsCO(b){_.each(b.checklistItems,function(d,c){d.complete=true});b.checklistStatus=2;var a=Ext.getCmp("tableview");if(a){refreshChecklistIcon(b,2)}}function markChecklistItemsNS(b){_.each(b.checklistItems,function(d,c){d.complete=false});if(b.checklistItems.length>0){b.checklistStatus=1}else{b.checklistStatus=0}var a=Ext.getCmp("tableview");if(a){refreshChecklistIcon(b,b.checklistStatus)}};